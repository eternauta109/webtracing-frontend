(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{32:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a(15),n=a.n(c),s=a(3),i=(a(32),a(6)),l=a.n(i),o=a(9),b=a(10),u=a.n(b),d=a(2),j=a(1),m=function(e){var t=e.setCinema,a=e.setLogged,c=Object(r.useRef)(""),n=Object(r.useRef)(""),s=Object(d.f)(),i=function(){var e=Object(o.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),c.current.value,n.current.value,c&&n){e.next=6;break}return alert("campi vuoti"),e.abrupt("return");case 6:return e.prev=6,e.next=9,u.a.post("https://webtracing.herokuapp.com/",{username:c.current.value,password:n.current.value}).then((function(e){return t(e.data),a(!0),s("/tracing")})).catch((function(e){alert(e.response.data),c.current.focus(),c.current.value="",n.current.value=""}));case 9:e.sent,e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(6),alert(e.t0),e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){})),Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-4 offset-md-4",children:Object(j.jsxs)("div",{className:"login-form bg-light mt-4 p-4",children:[Object(j.jsxs)("form",{className:"row g-3",onSubmit:i,children:[Object(j.jsx)("h4",{children:"Login for start to tracing"}),Object(j.jsxs)("div",{className:"col-12",children:[Object(j.jsx)("label",{children:"Username"}),Object(j.jsx)("input",{type:"text",name:"username",className:"form-control",placeholder:"Username",ref:c})]}),Object(j.jsxs)("div",{className:"col-12",children:[Object(j.jsx)("label",{children:"Password"}),Object(j.jsx)("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",ref:n})]}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("button",{type:"submit",className:"btn btn-dark float-end",children:"Login"})})]}),Object(j.jsx)("hr",{className:"mt-4"}),Object(j.jsx)("div",{className:"col-6",children:Object(j.jsx)("p",{className:"text-end mb-0 fs-6",children:"dev by Fabio Conti"})})]})})})})},p=a(16),O=function(e){var t=e.num,a=e.nome;return Object(j.jsx)("div",{className:"accordion accordion",id:"accordionFlushExample",children:Object(j.jsxs)("div",{className:"accordion-item",children:[Object(j.jsx)("h2",{className:"accordion-header",id:"flush-headingOne",children:Object(j.jsx)("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",tabIndex:"-1",children:Object(j.jsx)("p",{children:"in caso di registrazione senza codice fiscale..."})})}),Object(j.jsxs)("div",{id:"collapseOne",className:"accordion-collapse collapse px-2","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample",children:[Object(j.jsx)("input",{type:"text",ref:a,name:"name",className:"form-control my-2",placeholder:"NOME E COGNOME"}),Object(j.jsx)("input",{type:"text",name:"phoneNumber",ref:t,className:"form-control my-2",placeholder:"NUMERO DI TELEFONO"})]})]})})},h=a(18),x=a(7);a(27);var g=function(e){var t=e.registration,a=e.reg,c=e.setRegistrer,n=Object(r.useState)(""),i=Object(s.a)(n,2),b=i[0],d=i[1],m=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,u.a.delete("http://localhost:3001/tracing",{data:{codTicket:b}}).then(x.b.success("eliminazione dal db avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})).catch((function(e){return alert(e.response.data)}));case 4:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert("error axios tracing",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),O=a.onDb?Object(j.jsxs)("span",{children:[Object(j.jsxs)("span",{className:"fs-6",children:[" ticket: ",a.ticket]}),Object(j.jsxs)("span",{children:[" date: ",a.date]})]}):Object(j.jsxs)("span",{children:[Object(j.jsxs)("span",{className:"fs-6",children:[Object(j.jsxs)("del",{children:["ticket: ",a.ticket," "]})," "]}),Object(j.jsxs)("span",{children:[" ",Object(j.jsxs)("del",{children:[" date: ",a.date]})]})]});return Object(j.jsxs)("div",{children:[Object(j.jsx)("form",{onSubmit:m,children:Object(j.jsxs)("li",{className:"list-group-item d-flex justify-content-between",children:[O,Object(j.jsx)("button",{type:"submit",className:"btn btn-danger btn-sm",onClick:function(){d(a.ticket);var e=Object(p.a)(t);e[a.count]=Object(h.a)(Object(h.a)({},a),{},{onDb:!1}),c(e)},children:Object(j.jsx)("i",{className:"bi bi-trash"})})]})}),Object(j.jsx)(x.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},v=function(e){var t=e.registration,a=e.setRegistrer;return Object(j.jsx)("ul",{className:"list-group list-group-flush",children:t.map((function(e,r){return Object(j.jsx)(g,{registration:t,reg:e,setRegistrer:a},r)}))})},f=function(e){var t=e.cinema,a=Object(r.useRef)(""),c=Object(r.useRef)(),n=Object(r.useRef)(""),i=Object(r.useRef)(""),b=Object(r.useRef)(""),d=Object(r.useState)(0),m=Object(s.a)(d,2),h=m[0],g=m[1],f=Object(r.useState)([]),N=Object(s.a)(f,2),k=N[0],C=N[1],y=function(){var e=Object(o.a)(l.a.mark((function e(r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),t){e.next=4;break}return alert("fai prima il login grazie"),e.abrupt("return");case 4:if(a.current.value||i.current.value||b.current.value){e.next=7;break}return x.b.error("inserire codice fiscale o nome, cognome e numero di telefono",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 7:if(c.current.value){e.next=10;break}return x.b.error("si deve inserire il codice biglietto",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 10:return e.prev=10,e.next=13,u.a.post("https://webtracing.herokuapp.com/tracing",{registration:{cinema:t,fiscale:a.current.value,nameClient:i.current.value,numberPhone:b.current.value,ticket:c.current.value,date:(new Date).toLocaleString()+""}}).then((function(e){e.data?x.b.success("registrazione avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):alert("qualcosa \xe8 andato storto. Riprova")})).catch((function(e){return alert(e.response.data)}));case 13:e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),alert("error axios tracing",e.t0);case 19:g(h+1),(n=Object(p.a)(k))[h]={fiscale:a.current.value,nameClient:i.current.value,numberPhone:b.current.value,ticket:c.current.value,count:h,date:(new Date).toLocaleString()+"",onDb:!0},C(n),2===h&&g(0),a.current.value="",i.current.value="",b.current.value="",c.current.value="",a.current.focus();case 29:case"end":return e.stop()}}),e,null,[[10,16]])})));return function(t){return e.apply(this,arguments)}}(),w=function(e){"Enter"===e.key&&"codFisc"===e.target.name&&c.current.focus(),"Enter"===e.key&&"ticket"===e.target.name&&n.current.focus()};return Object(r.useEffect)((function(){}),[]),Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-md-8 offset-md-2",children:Object(j.jsxs)("div",{className:"login-form bg-light mt-4 p-4",children:[Object(j.jsxs)("form",{className:"row g-3",children:[Object(j.jsx)("h4",{children:"Tracing"}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("input",{className:"form-control",type:"text",value:t,"aria-label":"Disabled input example",disabled:!0})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("input",{type:"text",ref:a,tabIndex:"0",name:"codFisc",onKeyPress:w,className:"form-control",placeholder:"CODICE FISCALE"})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)(O,{num:b,nome:i})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("input",{type:"text",name:"ticket",onKeyPress:w,tabIndex:"0",ref:c,className:"form-control",placeholder:"TICKET"})}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("input",{name:"date",className:"form-control","aria-label":"Disabled input example",placeholder:"date",value:(new Date).toLocaleString()+"",disabled:!0})}),Object(j.jsx)("div",{className:"col-12 d-flex justify-content-center",children:Object(j.jsx)("button",{ref:n,type:"button",onClick:y,className:"btn btn-dark",children:"Register"})})]}),Object(j.jsx)("hr",{}),Object(j.jsx)(v,{registration:k,setRegistrer:C}),Object(j.jsx)("hr",{className:"mt-4"}),Object(j.jsx)("div",{className:"col-12",children:Object(j.jsx)("p",{className:"text-center mb-0",children:"dev by Fabio Conti"})})]})})}),Object(j.jsx)(x.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})},N=a(11),k=function(e){var t=e.isLogged,a=function(){return t?Object(j.jsx)("li",{className:"nav-item m-2",children:Object(j.jsx)(N.b,{to:"/tracing",children:"Tracing "})}):Object(j.jsx)("li",{className:"nav-item m-2",children:"loggati"})};return Object(j.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",children:Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsx)("a",{className:"navbar-brand",children:"TRACING"}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(j.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(j.jsx)("li",{className:"nav-item m-2",children:Object(j.jsx)(N.b,{to:"/login",children:"Login"})}),Object(j.jsx)(a,{})]})})]})})};function C(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],n=Object(r.useState)(!1),i=Object(s.a)(n,2),l=i[0],o=i[1];return Object(j.jsx)("div",{children:Object(j.jsx)("div",{className:"container-fluid",children:Object(j.jsxs)(N.a,{children:[Object(j.jsx)(k,{isLogged:l}),Object(j.jsxs)(d.c,{children:[Object(j.jsx)(d.a,{path:"/",element:Object(j.jsx)(m,{setCinema:c,setLogged:o})}),Object(j.jsx)(d.a,{path:"login",element:Object(j.jsx)(m,{setCinema:c,setLogged:o})}),Object(j.jsx)(d.a,{path:"tracing",element:Object(j.jsx)(f,{cinema:a})}),Object(j.jsx)(d.a,{path:"*",element:Object(j.jsx)("main",{style:{padding:"1rem"},children:Object(j.jsx)("p",{children:"There's nothing here!"})})})]})]})})})}n.a.render(Object(j.jsx)(C,{}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.7ac65df8.chunk.js.map