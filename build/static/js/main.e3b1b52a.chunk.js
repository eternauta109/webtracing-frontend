(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{121:function(e,a,t){e.exports=t(229)},126:function(e,a,t){},229:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(50),l=t.n(c),s=t(6),o=(t(126),t(21)),i=t.n(o),m=t(31),u=t(32),d=t.n(u),b=t(1),p=function(e){var a=e.setCinema,t=e.setLogged,c=e.setTotScreen,l=Object(n.useRef)(""),s=Object(n.useRef)(""),o=Object(b.f)(),u=function(){var e=Object(m.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),l&&s){e.next=4;break}return alert("campi vuoti"),e.abrupt("return");case 4:return e.prev=4,e.next=7,d.a.post("https://webtracing.herokuapp.com/",{username:l.current.value,password:s.current.value}).then((function(e){return a(e.data.cinema),c(e.data.screen),t(!0),o("/tracing")})).catch((function(e){alert("axios del login\n"+e),l.current.focus(),l.current.value="",s.current.value=""}));case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),alert(e.t0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){})),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4 offset-md-4"},r.a.createElement("div",{className:"login-form bg-light mt-4 p-4"},r.a.createElement("form",{className:"row g-3",onSubmit:u},r.a.createElement("h4",null,"Login for start to tracing"),r.a.createElement("div",{className:"col-12"},r.a.createElement("label",null,"Username"),r.a.createElement("input",{type:"text",name:"username",className:"form-control",placeholder:"Username",ref:l})),r.a.createElement("div",{className:"col-12"},r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",name:"password",className:"form-control",placeholder:"Password",ref:s})),r.a.createElement("div",{className:"col-12"},r.a.createElement("button",{type:"submit",className:"btn btn-dark float-end"},"Login"))),r.a.createElement("hr",{className:"mt-4"}),r.a.createElement("div",{className:"col-6"},r.a.createElement("p",{className:"text-end mb-0 fs-6"},"dev by Fabio Conti"))))))},E=t(51),v=t(70),f=t.n(v),g=function(e){var a=e.setScreen,t=e.setTime,n=e.num,c=e.nome,l=e.totScreen,s=Array.from(Array(l).keys());f.a.locale("it");return r.a.createElement("div",{className:"accordion accordion",id:"accordionFlushExample"},r.a.createElement("div",{className:"accordion-item"},r.a.createElement("h2",{className:"accordion-header",id:"flush-headingOne"},r.a.createElement("button",{className:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne",tabIndex:"-1"},r.a.createElement("p",null,"in caso di registrazione senza codice fiscale..."))),r.a.createElement("div",{id:"collapseOne",className:"accordion-collapse collapse px-2","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},r.a.createElement("input",{type:"text",ref:c,name:"name",className:"form-control my-2",placeholder:"NOME E COGNOME"}),r.a.createElement("input",{type:"text",name:"phoneNumber",ref:n,className:"form-control my-2",placeholder:"NUMERO DI TELEFONO"}),r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("div",{className:"col-4 m-1"},r.a.createElement("label",{className:"text-muted",htmlFor:"form-select"},"SALA"),r.a.createElement("select",{className:"form-select mb-1",onChange:function(e){return a(e.target.value)},defaultValue:"screen"},s.map((function(e,a){return r.a.createElement("option",{key:a},e+1)})))),r.a.createElement("div",{className:"col-7 m-1"},r.a.createElement("label",{className:"text-muted",htmlFor:"form-select"},"ORARIO"),r.a.createElement("select",{className:"form-select mb-1",onChange:function(e){return t(e.target.value)},defaultValue:"orario"},function(){var e=[],a=f()().set({hour:10,minute:30});new Array(175).fill().map((function(t){e.push(a.format("HH:mm")),a=a.add(5,"minutes")}));return e}().map((function(e,a){return r.a.createElement("option",{key:a},e)}))))))))},h=t(71),N=t(23);t(81);var O=function(e){var a=e.registration,t=e.reg,c=e.setRegistrer,l=Object(n.useState)(""),o=Object(s.a)(l,2),u=o[0],b=o[1];console.log("registartion",t);var p=function(){var e=Object(m.a)(i.a.mark((function e(a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,d.a.delete("https://webtracing.herokuapp.com/tracing/",{data:{codTicket:u}}).then(N.b.success("eliminazione dal db avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})).catch((function(e){return alert(e.response.data)}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("errore axios eliminazione elemento in registration Element",e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(a){return e.apply(this,arguments)}}(),v=t.onDb?r.a.createElement("span",null,r.a.createElement("span",{className:"fs-6"}," ticket: ",t.ticket),r.a.createElement("span",null," date: ",t.date)):r.a.createElement("span",null,r.a.createElement("span",{className:"fs-6"},r.a.createElement("del",null,"ticket: ",t.ticket," ")," "),r.a.createElement("span",null," ",r.a.createElement("del",null," date: ",t.date)));return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:p},r.a.createElement("li",{className:"list-group-item d-flex justify-content-between"},v,r.a.createElement("button",{type:"submit",className:"btn btn-danger btn-sm",onClick:function(){b(t.ticket);var e=Object(E.a)(a);e[t.count]=Object(h.a)(Object(h.a)({},t),{},{onDb:!1}),c(e)}},r.a.createElement("i",{className:"bi bi-trash"})))),r.a.createElement(N.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))},k=function(e){var a=e.registration,t=e.setRegistrer;return r.a.createElement("ul",{className:"list-group list-group-flush"},a.map((function(e,n){return r.a.createElement(O,{key:n,registration:a,reg:e,setRegistrer:t})})))},x=t(120),y=t.n(x),j=function(e){var a=e.origin,t=e.setInput,c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],i=l[1],m=Object(n.useState)(!1),u=Object(s.a)(m,2),d=u[0],b=u[1];return r.a.createElement("div",null,r.a.createElement("button",{type:"button",className:"btn btn-secondary ","data-bs-toggle":"modal",tabIndex:-1,onClick:function(){return i(!0)},"data-bs-target":"#modalPhoto"+a},r.a.createElement("i",{className:"bi bi-camera-fill"})),r.a.createElement("div",{className:"modal fade",id:"modalPhoto"+a,"aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLabel"},"Scann ",a),r.a.createElement("button",{type:"button",onClick:function(){return i(!1)},className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),r.a.createElement("div",{className:"modal-body"},r.a.createElement("div",{className:"shadow p-3 mb-5 bg-body rounded"},r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(y.a,{width:400,height:500,onUpdate:function(e,a){return function(e,a){a?(t.current.value=a,b(a.text),i(!1)):b("not found")}(0,a)}}),r.a.createElement("p",null,d)))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",onClick:function(){return i(!1)},"aria-label":"Close",className:"btn btn-secondary","data-bs-dismiss":"modal"},"Close"))))))},C=function(e){var a=e.cinema,t=e.totScreen,c=Object(n.useRef)(""),l=Object(n.useRef)(),o=Object(n.useRef)(""),u=Object(n.useState)(),b=Object(s.a)(u,2),p=b[0],v=b[1],f=Object(n.useState)(),h=Object(s.a)(f,2),O=h[0],x=h[1],y=Object(n.useRef)(""),C=Object(n.useRef)(""),w=Object(n.useState)(0),S=Object(s.a)(w,2),L=S[0],R=S[1],T=Object(n.useState)([]),I=Object(s.a)(T,2),P=I[0],D=I[1];var F=function(){var e=Object(m.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a){e.next=4;break}return alert("fai prima il login grazie"),e.abrupt("return");case 4:if(c.current.value||y.current.value||C.current.value){e.next=7;break}return N.b.error("inserire codice fiscale o nome, cognome e numero di telefono",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 7:if(l.current.value){e.next=14;break}if(!y.current.value||!C.current.value){e.next=12;break}l.current.value=y.current.value+" "+C.current.value,e.next=14;break;case 12:return N.b.error("si deve inserire il codice biglietto o sala,ingresso e dati cliente",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}),e.abrupt("return");case 14:return e.prev=14,e.next=17,d.a.post("https://webtracing.herokuapp.com/tracing",{registration:{cinema:a,fiscale:c.current.value,nameClient:y.current.value,numberPhone:C.current.value,screen:p,time:O,ticket:l.current.value,date:(new Date).toLocaleString()+""}}).then((function(e){e.data?N.b.success("registrazione avvenuta",{position:"bottom-right",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):alert("qualcosa \xe8 andato storto. Riprova")})).catch((function(e){return alert(e.response.data)}));case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(14),alert("error axios tracing",e.t0);case 22:R(L+1),(n=Object(E.a)(P))[L]={fiscale:c.current.value,ticket:l.current.value,nameClient:y.current.value,numberPhone:C.current.value,screen:p,time:O,count:L,date:(new Date).toLocaleString()+"",onDb:!0},D(n),2===L&&R(0),c.current.value="",y.current.value="",C.current.value="",l.current.value="",c.current.focus();case 29:case"end":return e.stop()}}),e,null,[[14,19]])})));return function(a){return e.apply(this,arguments)}}(),A=function(e){"Enter"===e.key&&"codFisc"===e.target.name&&l.current.focus(),"Enter"===e.key&&"ticket"===e.target.name&&o.current.focus()};return Object(n.useEffect)((function(){}),[]),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement("div",{className:"login-form bg-light mt-4 p-4"},r.a.createElement("form",{className:"row g-3"},r.a.createElement("h4",null,"Tracing"),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{className:"form-control",type:"text",value:a,"aria-label":"Disabled input example",disabled:!0})),r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{type:"text",ref:c,tabIndex:"0",name:"codFisc",onKeyPress:A,className:"form-control",placeholder:"CODICE FISCALE"})),r.a.createElement("div",{className:"col-2"},r.a.createElement(j,{origin:"codfiscale",setInput:c})),r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{type:"text",name:"ticket",onKeyPress:A,tabIndex:"0",ref:l,className:"form-control",placeholder:"TICKET"})),r.a.createElement("div",{className:"col-2"},r.a.createElement(j,{origin:"ticket",setInput:l})),r.a.createElement("div",{className:"col-12"},r.a.createElement(g,{setScreen:v,setTime:x,num:C,nome:y,totScreen:t})),r.a.createElement("div",{className:"col-12"},r.a.createElement("input",{name:"date",className:"form-control","aria-label":"Disabled input example",placeholder:"date",value:(new Date).toLocaleString()+"",disabled:!0})),r.a.createElement("div",{className:"col-12 d-flex justify-content-center"},r.a.createElement("button",{ref:o,type:"button",onClick:F,className:"btn btn-dark"},"Register"))),r.a.createElement("hr",null),r.a.createElement(k,{registration:P,setRegistrer:D}),r.a.createElement("hr",{className:"mt-4"}),r.a.createElement("div",{className:"col-12"},r.a.createElement("p",{className:"text-center mb-0"},"dev by Fabio Conti"))))),r.a.createElement(N.a,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))},w=t(33),S=function(e){var a=e.isLogged,t=function(){return a?r.a.createElement("li",{className:"nav-item m-2"},r.a.createElement(w.b,{to:"/tracing"},"Tracing ")):r.a.createElement("li",{className:"nav-item m-2"},"loggati")};return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("a",{className:"navbar-brand",href:"/"},"TRACING"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},r.a.createElement("li",{className:"nav-item m-2"},r.a.createElement(w.b,{to:"/login"},"Login")),r.a.createElement(t,null)))))};function L(){var e=Object(n.useState)(""),a=Object(s.a)(e,2),t=a[0],c=a[1],l=Object(n.useState)(0),o=Object(s.a)(l,2),i=o[0],m=o[1],u=Object(n.useState)(!1),d=Object(s.a)(u,2),E=d[0],v=d[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement(w.a,null,r.a.createElement(S,{isLogged:E}),r.a.createElement(b.c,null,r.a.createElement(b.a,{path:"/",element:r.a.createElement(p,{setTotScreen:m,setCinema:c,setLogged:v})}),r.a.createElement(b.a,{path:"login",element:r.a.createElement(p,{setCinema:c,setTotScreen:m,setLogged:v})}),r.a.createElement(b.a,{path:"tracing",element:r.a.createElement(C,{cinema:t,totScreen:i})}),r.a.createElement(b.a,{path:"*",element:r.a.createElement("main",{style:{padding:"1rem"}},r.a.createElement("p",null,"There's nothing here!"))})))))}l.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[121,1,2]]]);
//# sourceMappingURL=main.e3b1b52a.chunk.js.map